### 软件设计原则之开闭原则

#### 概述

- 开闭原则是设计原则中的原则。
- 对修改关闭，对扩展开放。

#### 例子

- 用按钮控制拨号器，有数字按钮和拨号按钮，分别控制拨号器的数字功能和拨号功能
    - 此例子中按钮和拨号器就是核心类，设计的时候优先考虑核心类实现开闭原则。
    - 需要逐个考虑核心类后续可能会有那些扩展，例如按钮可能后面会增加其他类型的按键，考虑使用哪种设计模式来解决开闭原则。
- 按钮（Button）和拨号器（Dialer）可以各自独立存在，但是按钮需要关联拨号器才能正常工作，但是如果关联了拨号器之后，按钮就和拨号器耦合在一起了，
而且拨号器有多个种类。可以考虑在按钮和拨号器之间增加一个接口（ButtonServer）来实现按钮和拨号器的解耦，按钮只是关联接口，拨号器实现了该接口就可以
被按钮所使用，这就是**策略模式**。
- 如果拨号器直接实现ButtonServer的话，那么拨号器需要添加if/else来判断是哪一种类型来调用不同的方法，如果后续新增了其他类型的话，就得要去修改if/else
逻辑了，这样就违背了开闭原则了，而拨号器应该只是提供数字按键和拨号功能。这种情况可以考虑使用适配器模式，使用适配器实现ButtonServer接口，然后适配器
再关联拨号器。这样当再新增拨号类型的时候，新增对应的适配器即可。
- 如果此时要求按钮除了控制拨号器之外，还需要控制发声器。当多个类（拨号器、发声器）的行为触发需要受到一个类（按钮）的状态的改变的时候，可以考虑观察者模式，
按钮为被观察者，拨号器和发声器为观察者，被观察者关联观察者列表。
- 如果按钮要求按下之后还需要做其他的操作，例如改变状态，并且要分为不同的类型，不同的类型按下之后还要做事情也不相同，那这个时候可以考虑模板方法模式。


